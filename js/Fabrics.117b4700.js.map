{"version":3,"sources":["webpack:///./src/views/Fabric/Fabrics.vue?95f0","webpack:///./src/views/Fabric/Fabrics.vue","webpack:///./src/views/Fabric/Fabrics.vue?5a1a","webpack:///./src/views/Fabric/Fabrics.vue?cd06","webpack:///./src/components/FabricCard.vue","webpack:///./src/components/FabricCard.vue?ef1a","webpack:///./src/components/FabricCard.vue?11e7","webpack:///./src/components/FabricCard.vue?079f"],"names":["class","src","alt","id","hasAside","searchContent","placeholder","clearable","onHideButtonClick","filterOptions","option","index","key","title","gutter","items","item","_index","span","checked","style","label","type","hasOpenButton","tags","length","tag","data","onTagCloseClick","onCloseAllTags","list","has-buttons","has-status","onFabricCardAddToFavorite","pageCount","background","layout","current-page","page","page-count","onPaginationChange","createFabricsParams","options","_options","reduce","target","filter","str","value","params","materials","colors","Component","name","components","FilterTag","FabricCard","CollapseItem","setup","store","state","fabric","prev","dispatch","deep","loadingInstance","service","fullscreen","filterData","filters","close","setTimeout","status","message","_page","render","__scopeId","onImageClick","hasStatus","hasButtons","real_composition","onFavoriteClick","icon","favorite","onAddClick","props","Object","default","Boolean","emit","router","push","formatImageUrl"],"mappings":"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","file":"js/Fabrics.117b4700.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Fabrics.vue?vue&type=style&index=0&id=1e347e8b&scoped=true&lang=stylus\"","<template>\n  <el-container id=\"components-dashboard-component\">\n    <!--Aside Filter-->\n    <el-aside class=\"aside\" :class=\"{ 'aside-active': hasAside }\">\n      <div class=\"search-container\">\n        <el-input\n          class=\"search-input\"\n          v-model=\"searchContent\"\n          placeholder=\"Search Fabric\"\n          clearable\n        ></el-input>\n        <div class=\"hide-button-container\" @click=\"onHideButtonClick(false)\">\n          <p>Hide</p>\n          <img\n            class=\"hide-icon\"\n            src=\"@/assets/images/icons/png/switch.png\"\n            alt=\"\"\n          />\n        </div>\n      </div>\n      <CollapseItem\n        v-for=\"(option, index) in filterOptions\"\n        :key=\"index\"\n        :title=\"option.title\"\n      >\n        <template v-if=\"option.title === 'Colors'\">\n          <el-row class=\"colors-container\" :gutter=\"5\">\n            <el-col\n              class=\"color-wrapper\"\n              v-for=\"(item, _index) in option.items\"\n              :key=\"_index\"\n              :span=\"4\"\n              @click=\"item.checked = !item.checked\"\n            >\n              <div\n                class=\"color-circle\"\n                :class=\"{ 'color-active': item.checked }\"\n                :style=\"{ background: item.label }\"\n              ></div>\n            </el-col>\n          </el-row>\n        </template>\n        <template v-else>\n          <div\n            v-for=\"(item, _index) in option.items\"\n            :key=\"_index\"\n            class=\"option\"\n          >\n            <input type=\"checkbox\" v-model=\"item.checked\" />\n            <div class=\"name\">{{ item.label }}</div>\n          </div>\n        </template>\n      </CollapseItem>\n    </el-aside>\n\n    <div\n      v-if=\"hasOpenButton\"\n      class=\"open-aside-button\"\n      @click=\"onHideButtonClick(true)\"\n    >\n      <img\n        class=\"arrow-right-icon\"\n        src=\"@/assets/images/icons/png/arrow-right.png\"\n        alt=\"\"\n      />\n    </div>\n\n    <!--Fabric Cards-->\n    <el-main class=\"main-container\">\n      <div v-if=\"tags.length\" class=\"tags-container\">\n        <FilterTag\n          v-for=\"(tag, index) in tags\"\n          :key=\"index\"\n          :data=\"tag\"\n          @close=\"onTagCloseClick\"\n        ></FilterTag>\n        <p class=\"button-clear-all-tags\" @click=\"onCloseAllTags\">Clear All</p>\n      </div>\n      <el-row :gutter=\"30\">\n        <el-col\n          class=\"col\"\n          v-for=\"(item, index) in list\"\n          :key=\"index\"\n          :span=\"hasAside ? 8 : 6\"\n        >\n          <FabricCard\n            :data=\"item\"\n            has-buttons\n            has-status\n            @add-to-favorite=\"onFabricCardAddToFavorite\"\n          ></FabricCard>\n        </el-col>\n      </el-row>\n      <el-pagination\n        v-if=\"pageCount\"\n        background\n        layout=\"prev, pager, next\"\n        :current-page=\"page\"\n        :page-count=\"pageCount\"\n        @current-change=\"onPaginationChange\"\n      >\n      </el-pagination>\n    </el-main>\n  </el-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, watch, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { FilterOption } from \"@/typings/asideFilter\";\nimport {\n  GetFabricFilters,\n  GetFabrics,\n  PostAddFabricToFavorite\n} from \"@/typings/store\";\n\nimport { ElLoading, ElNotification } from \"element-plus\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport FabricCard from \"@/components/FabricCard.vue\";\nimport CollapseItem from \"@/components/CollapseItem.vue\";\n\nimport {\n  closeAllTags,\n  closeTag,\n  createFilterOptions,\n  watchFilterOptions\n} from \"@/utils/asidtFilter\";\nimport { FabricsParams } from \"@/typings/fabric\";\n\nconst createFabricsParams = (options: FilterOption[]): FabricsParams => {\n  const _options = options.reduce((target: any, option: FilterOption) => {\n    target[option.title] = option.items\n      .filter(item => item.checked)\n      .reduce((str, item, index) => {\n        if (index === 0) {\n          return str + `${item.value}`;\n        }\n        return str + `,${item.value}`;\n      }, \"\");\n    return target;\n  }, {});\n  const params: FabricsParams = {};\n  if (_options[\"Materials\"]) params.materials = _options[\"Materials\"];\n  if (_options[\"Colors\"]) params.colors = _options[\"Colors\"];\n  return params;\n};\n\nconst Component = defineComponent({\n  name: \"Fabrics\",\n  components: {\n    FilterTag,\n    FabricCard,\n    CollapseItem\n  },\n  setup() {\n    const store = useStore();\n\n    const tags = ref<string[]>([]);\n    const hasAside = ref(true);\n    const hasOpenButton = ref(false);\n    const searchContent = ref(\"\");\n    const page = ref(1);\n    const pageCount = ref(0);\n\n    const list = computed(() => store.state.fabric.list);\n\n    const filterOptions = ref<FilterOption[]>([]);\n\n    watch<FilterOption[]>(\n      filterOptions,\n      async (options, prev) => {\n        if (!prev.length) return;\n        tags.value = watchFilterOptions(options);\n        const params = createFabricsParams(options);\n\n        const data = await store.dispatch(GetFabrics, params);\n        page.value = data.page;\n        pageCount.value = data.pageCount;\n      },\n      { deep: true }\n    );\n\n    onMounted(async () => {\n      const loadingInstance = ElLoading.service({ fullscreen: true });\n      try {\n        await store.dispatch(GetFabricFilters);\n        const data = await store.dispatch(GetFabrics, {});\n        page.value = data.page;\n        pageCount.value = data.pageCount;\n\n        const filterData = store.state.fabric.filters;\n        filterOptions.value = createFilterOptions(filterData, [\n          { title: \"Materials\", key: \"materials\" },\n          { title: \"Colors\", key: \"colors\" }\n        ]);\n      } finally {\n        loadingInstance.close();\n      }\n    });\n\n    const onHideButtonClick = (value: boolean) => {\n      hasAside.value = value;\n\n      if (!value) {\n        setTimeout(() => {\n          hasOpenButton.value = true;\n        }, 300);\n      } else {\n        hasOpenButton.value = false;\n      }\n    };\n\n    const onTagCloseClick = (tag: string) => {\n      filterOptions.value = closeTag(filterOptions.value, tag);\n    };\n\n    const onCloseAllTags = () => {\n      filterOptions.value = closeAllTags(filterOptions.value);\n    };\n\n    const onFabricCardAddToFavorite = async (id: number) => {\n      const { status, message } = await store.dispatch(\n        PostAddFabricToFavorite,\n        id\n      );\n      if (status === \"success\") {\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message\n        });\n      } else {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message\n        });\n      }\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      const params = createFabricsParams(filterOptions.value);\n      const data = await store.dispatch(GetFabrics, { ...params, page: _page });\n      page.value = data.page;\n      pageCount.value = data.pageCount;\n    };\n\n    return {\n      list,\n      page,\n      pageCount,\n      tags,\n      filterOptions,\n      hasAside,\n      hasOpenButton,\n      searchContent,\n\n      onHideButtonClick,\n      onTagCloseClick,\n      onCloseAllTags,\n      onFabricCardAddToFavorite,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#components-dashboard-component\n  page-container()\n  position relative\n\n  .aside\n    transition 300ms ease transform, 300ms ease width\n    transform translateX(-250px)\n    width 0 !important\n    height 100%\n    margin-right 30px\n\n    .search-container\n      flex(space-between)\n      padding 0 0 15px\n      .search-input\n        margin 0 15px 0 0\n      .hide-button-container\n        flex(space-between)\n        width 60px\n        cursor pointer\n        .hide-icon\n          width 20px\n          height auto\n\n  .aside-active\n    transform translateX(0)\n    width 250px !important\n\n  .main-container\n    .tags-container\n      flex(flex-start)\n      flex-wrap wrap\n      padding 10px 0\n      .button-clear-all-tags\n        font-size $font-size-normal\n        color $color-tag-text\n        height 40px\n        width 60px\n        line-height 38px\n        text-align center\n        cursor pointer\n\n  .open-aside-button\n    flex()\n    position absolute\n    top 30px\n    left 25px\n    width 20px\n    height 50px\n    background white\n    border 1px solid $color-secondary\n    border-radius 5px\n    cursor pointer\n    .arrow-right-icon\n      width 12px\n      height auto\n\n  .col\n    padding-bottom 30px\n\n  .option\n    padding 5px 10px\n    flex(flex-start)\n    input\n      margin-right 10px\n    .name\n      font-size $font-size-large\n      font-weight 500\n\n  .colors-container\n    .color-wrapper\n      margin-bottom 5px\n      .color-circle\n        width 30px\n        height 30px\n        border 1px solid $color-gray\n        border-radius 50%\n        background red\n        cursor pointer\n\n      .color-active\n        border 1px solid $color-active\n\n  :deep() .el-pagination\n    display flex\n    justify-content center\n    padding 15px 0\n</style>\n","\nimport { defineComponent, ref, computed, watch, onMounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { FilterOption } from \"@/typings/asideFilter\";\nimport {\n  GetFabricFilters,\n  GetFabrics,\n  PostAddFabricToFavorite\n} from \"@/typings/store\";\n\nimport { ElLoading, ElNotification } from \"element-plus\";\nimport FilterTag from \"@/components/FilterTag.vue\";\nimport FabricCard from \"@/components/FabricCard.vue\";\nimport CollapseItem from \"@/components/CollapseItem.vue\";\n\nimport {\n  closeAllTags,\n  closeTag,\n  createFilterOptions,\n  watchFilterOptions\n} from \"@/utils/asidtFilter\";\nimport { FabricsParams } from \"@/typings/fabric\";\n\nconst createFabricsParams = (options: FilterOption[]): FabricsParams => {\n  const _options = options.reduce((target: any, option: FilterOption) => {\n    target[option.title] = option.items\n      .filter(item => item.checked)\n      .reduce((str, item, index) => {\n        if (index === 0) {\n          return str + `${item.value}`;\n        }\n        return str + `,${item.value}`;\n      }, \"\");\n    return target;\n  }, {});\n  const params: FabricsParams = {};\n  if (_options[\"Materials\"]) params.materials = _options[\"Materials\"];\n  if (_options[\"Colors\"]) params.colors = _options[\"Colors\"];\n  return params;\n};\n\nconst Component = defineComponent({\n  name: \"Fabrics\",\n  components: {\n    FilterTag,\n    FabricCard,\n    CollapseItem\n  },\n  setup() {\n    const store = useStore();\n\n    const tags = ref<string[]>([]);\n    const hasAside = ref(true);\n    const hasOpenButton = ref(false);\n    const searchContent = ref(\"\");\n    const page = ref(1);\n    const pageCount = ref(0);\n\n    const list = computed(() => store.state.fabric.list);\n\n    const filterOptions = ref<FilterOption[]>([]);\n\n    watch<FilterOption[]>(\n      filterOptions,\n      async (options, prev) => {\n        if (!prev.length) return;\n        tags.value = watchFilterOptions(options);\n        const params = createFabricsParams(options);\n\n        const data = await store.dispatch(GetFabrics, params);\n        page.value = data.page;\n        pageCount.value = data.pageCount;\n      },\n      { deep: true }\n    );\n\n    onMounted(async () => {\n      const loadingInstance = ElLoading.service({ fullscreen: true });\n      try {\n        await store.dispatch(GetFabricFilters);\n        const data = await store.dispatch(GetFabrics, {});\n        page.value = data.page;\n        pageCount.value = data.pageCount;\n\n        const filterData = store.state.fabric.filters;\n        filterOptions.value = createFilterOptions(filterData, [\n          { title: \"Materials\", key: \"materials\" },\n          { title: \"Colors\", key: \"colors\" }\n        ]);\n      } finally {\n        loadingInstance.close();\n      }\n    });\n\n    const onHideButtonClick = (value: boolean) => {\n      hasAside.value = value;\n\n      if (!value) {\n        setTimeout(() => {\n          hasOpenButton.value = true;\n        }, 300);\n      } else {\n        hasOpenButton.value = false;\n      }\n    };\n\n    const onTagCloseClick = (tag: string) => {\n      filterOptions.value = closeTag(filterOptions.value, tag);\n    };\n\n    const onCloseAllTags = () => {\n      filterOptions.value = closeAllTags(filterOptions.value);\n    };\n\n    const onFabricCardAddToFavorite = async (id: number) => {\n      const { status, message } = await store.dispatch(\n        PostAddFabricToFavorite,\n        id\n      );\n      if (status === \"success\") {\n        ElNotification({\n          title: \"Success\",\n          type: \"success\",\n          message\n        });\n      } else {\n        ElNotification({\n          title: \"Error\",\n          type: \"error\",\n          message\n        });\n      }\n    };\n\n    const onPaginationChange = async (_page: number) => {\n      const params = createFabricsParams(filterOptions.value);\n      const data = await store.dispatch(GetFabrics, { ...params, page: _page });\n      page.value = data.page;\n      pageCount.value = data.pageCount;\n    };\n\n    return {\n      list,\n      page,\n      pageCount,\n      tags,\n      filterOptions,\n      hasAside,\n      hasOpenButton,\n      searchContent,\n\n      onHideButtonClick,\n      onTagCloseClick,\n      onCloseAllTags,\n      onFabricCardAddToFavorite,\n      onPaginationChange\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./Fabrics.vue?vue&type=template&id=1e347e8b&scoped=true\"\nimport script from \"./Fabrics.vue?vue&type=script&lang=ts\"\nexport * from \"./Fabrics.vue?vue&type=script&lang=ts\"\n\nimport \"./Fabrics.vue?vue&type=style&index=0&id=1e347e8b&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-1e347e8b\"\n\nexport default script","<template>\n  <div id=\"fabric-card-component\">\n    <div\n      class=\"cover-image\"\n      :style=\"{\n        backgroundImage: `url('${formatImageUrl(data.image_url + '@250-250')}')`\n      }\"\n      @click=\"onImageClick\"\n    >\n      <template v-if=\"hasStatus\">\n        <div class=\"collection-tag\">\n          Collection Name\n        </div>\n        <div class=\"cover-status\">\n          <div class=\"status-tag\">\n            Developing\n          </div>\n        </div>\n      </template>\n    </div>\n\n    <div class=\"content-container\">\n      <div\n        class=\"content-wrapper\"\n        :style=\"{ width: hasButtons ? '70%' : 'auto' }\"\n      >\n        <h3 class=\"title\">{{ data.name }}</h3>\n        <p class=\"description\">{{ data.real_composition }}</p>\n      </div>\n      <div v-if=\"hasButtons\" class=\"buttons-group\">\n        <div class=\"button-wrapper\" @click=\"onFavoriteClick\">\n          <font-awesome-icon\n            class=\"icon heart\"\n            :icon=\"[`${data.favorite ? 'fas' : 'far'}`, 'heart']\"\n          ></font-awesome-icon>\n          <p class=\"icon-name\">Favorite</p>\n        </div>\n        <div class=\"button-wrapper\" @click=\"onAddClick\">\n          <font-awesome-icon\n            class=\"icon plus\"\n            :icon=\"['fas', 'plus-circle']\"\n          ></font-awesome-icon>\n          <p class=\"icon-name\">Add</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { ElNotification } from \"element-plus\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    hasStatus: {\n      type: Boolean,\n      default: false\n    },\n    hasButtons: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const store = useStore();\n    const router = useRouter();\n    const { data, hasButtons } = toRefs(props);\n\n    const onImageClick = async () => {\n      await router.push({\n        name: \"FabricDetail\",\n        params: { id: data.value.id }\n      });\n    };\n\n    const onFavoriteClick = async () => {\n      if (!hasButtons) return;\n      emit(\"add-to-favorite\", data.value.id);\n    };\n\n    const onAddClick = () => {\n      if (!hasButtons) return;\n      ElNotification({\n        title: \"Success\",\n        type: \"success\",\n        message: `Add`\n      });\n    };\n\n    return {\n      onImageClick,\n      onFavoriteClick,\n      onAddClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n</script>\n\n<style scoped lang=\"stylus\">\n#fabric-card-component\n  width 100%\n  border solid 1px $color-secondary\n\n  .cover-image\n    position relative\n    width 100%\n    height 0\n    padding-bottom 100%\n    background-repeat no-repeat\n    background-position center\n    background-size cover\n    cursor pointer\n\n    .collection-tag\n      flex()\n      position absolute\n      left 0\n      top 15px\n      padding 8px 5px\n      background #f25152\n      font-size $font-size-normal\n      font-weight 600\n      color white\n\n    .cover-status\n      flex()\n      display none\n      backdrop-filter blur(2px)\n      position absolute\n      top 0\n      right 0\n      bottom 0\n      left 0\n\n      .status-tag\n        background white\n        border-radius 10px\n        font-size $font-size-lg2x\n        font-weight 600\n        color black\n        padding 15px\n\n    &:hover\n      .collection-tag\n        display none\n      .cover-status\n        display flex\n\n\n  .content-container\n    display flex\n    justify-content center\n    align-items flex-start\n    padding 15px 20px\n    .content-wrapper\n      .title\n        font-size $font-size-large\n        margin-bottom 5px\n      .description\n        font-size $font-size-normal\n    .buttons-group\n      display flex\n      justify-content space-between\n      align-items center\n      width 30%\n      .button-wrapper\n        display flex\n        flex-direction column\n        justify-content center\n        align-items center\n        cursor pointer\n        .icon\n          width 20px\n          height 20px\n          margin-bottom 5px\n        .heart\n          color: $color-heart\n        .plus\n          color: $color-black\n        .icon-name\n          font-size $font-size-button-name\n</style>\n","\nimport { defineComponent, toRefs, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { ElNotification } from \"element-plus\";\nimport { formatImageUrl } from \"@/utils/image\";\nimport { FabricResult } from \"@/typings/fabric\";\n\nconst Component = defineComponent({\n  name: \"FabricCard\",\n  props: {\n    data: {\n      type: Object as PropType<FabricResult>,\n      default: () => ({})\n    },\n    hasStatus: {\n      type: Boolean,\n      default: false\n    },\n    hasButtons: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { emit }) {\n    const store = useStore();\n    const router = useRouter();\n    const { data, hasButtons } = toRefs(props);\n\n    const onImageClick = async () => {\n      await router.push({\n        name: \"FabricDetail\",\n        params: { id: data.value.id }\n      });\n    };\n\n    const onFavoriteClick = async () => {\n      if (!hasButtons) return;\n      emit(\"add-to-favorite\", data.value.id);\n    };\n\n    const onAddClick = () => {\n      if (!hasButtons) return;\n      ElNotification({\n        title: \"Success\",\n        type: \"success\",\n        message: `Add`\n      });\n    };\n\n    return {\n      onImageClick,\n      onFavoriteClick,\n      onAddClick,\n      formatImageUrl\n    };\n  }\n});\n\nexport default Component;\n","import { render } from \"./FabricCard.vue?vue&type=template&id=50d1845f&scoped=true\"\nimport script from \"./FabricCard.vue?vue&type=script&lang=ts\"\nexport * from \"./FabricCard.vue?vue&type=script&lang=ts\"\n\nimport \"./FabricCard.vue?vue&type=style&index=0&id=50d1845f&scoped=true&lang=stylus\"\nscript.render = render\nscript.__scopeId = \"data-v-50d1845f\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FabricCard.vue?vue&type=style&index=0&id=50d1845f&scoped=true&lang=stylus\""],"sourceRoot":""}